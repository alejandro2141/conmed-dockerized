--INSERT INTO professional_calendar (professional_id , start_time,  end_time, specialty1, duration, time_between, monday, tuesday, wednesday, thursday, friday, saturday , sunday, date_start, date_end,   center_id,  status , deleted_professional, color ,date ,price ) VALUES ( '1',  '02:00:00-4' , '23:00:00-4', '100' , '50' , '10' ,  'true' ,  'true'  ,  'true' ,  'true'  ,  'true'  , 'false'  ,  'false'  ,   '2023-08-23T04:00:00.000Z'  ,  '2023-10-22T02:59:59.997Z'  ,   252 , '1' , false , '#FF4244' ,  '2023-08-23T21:51:21.307Z' ,  '70000'  )

/*
INSERT INTO professional_calendar (professional_id , start_time,  end_time, specialty1, duration, time_between, monday, tuesday, wednesday, thursday, friday, saturday , sunday, date_start, date_end,   center_id,  status , deleted_professional, color ,date ,price , active ) VALUES ( '1',  '02:00:00-4' , '23:00:00-4', '100' , '50' , '10' ,  'true' ,  'true'  ,  'true' ,  'true'  ,  'true'  , 'false'  ,  'false'  ,   '2023-08-23T04:00:00.000Z'  ,  '2023-10-22T02:59:59.997Z'  ,   251 , '1' , false , '#FF4244' ,  '2023-08-23T21:51:21.307Z' ,  '666' , true ) ;
INSERT INTO professional_calendar (professional_id , start_time,  end_time, specialty1, duration, time_between, monday, tuesday, wednesday, thursday, friday, saturday , sunday, date_start, date_end,   center_id,  status , deleted_professional, color ,date ,price , active ) VALUES ( '1',  '02:00:00-4' , '23:00:00-4', '100' , '50' , '10' ,  'true' ,  'true'  ,  'true' ,  'true'  ,  'true'  , 'false'  ,  'false'  ,   '2023-08-23T04:00:00.000Z'  ,  '2023-10-22T02:59:59.997Z'  ,   252 , '1' , false , '#FF4244' ,  '2023-08-23T21:51:21.307Z' ,  '667' , true ) ;
INSERT INTO professional_calendar (professional_id , start_time,  end_time, specialty1, duration, time_between, monday, tuesday, wednesday, thursday, friday, saturday , sunday, date_start, date_end,   center_id,  status , deleted_professional, color ,date ,price , active ) VALUES ( '1',  '02:00:00-4' , '23:00:00-4', '100' , '50' , '10' ,  'true' ,  'true'  ,  'true' ,  'true'  ,  'true'  , 'false'  ,  'false'  ,   '2023-08-23T04:00:00.000Z'  ,  '2023-10-22T02:59:59.997Z'  ,   253 , '1' , false , '#FF4244' ,  '2023-08-23T21:51:21.307Z' ,  '668' , true ) ;
INSERT INTO professional_calendar (professional_id , start_time,  end_time, specialty1, duration, time_between, monday, tuesday, wednesday, thursday, friday, saturday , sunday, date_start, date_end,   center_id,  status , deleted_professional, color ,date ,price , active ) VALUES ( '1',  '02:00:00-4' , '23:00:00-4', '100' , '50' , '10' ,  'true' ,  'true'  ,  'true' ,  'true'  ,  'true'  , 'false'  ,  'false'  ,   '2023-08-23T04:00:00.000Z'  ,  '2023-10-22T02:59:59.997Z'  ,   251 , '1' , false , '#FF4244' ,  '2023-08-23T21:51:21.307Z' ,  '669' , true ) ;
INSERT INTO professional_calendar (professional_id , start_time,  end_time, specialty1, duration, time_between, monday, tuesday, wednesday, thursday, friday, saturday , sunday, date_start, date_end,   center_id,  status , deleted_professional, color ,date ,price , active ) VALUES ( '1',  '02:00:00-4' , '23:00:00-4', '100' , '50' , '10' ,  'true' ,  'true'  ,  'true' ,  'true'  ,  'true'  , 'false'  ,  'false'  ,   '2023-08-23T04:00:00.000Z'  ,  '2023-10-22T02:59:59.997Z'  ,   252 , '1' , false , '#FF4244' ,  '2023-08-23T21:51:21.307Z' ,  '777' , true ) ;
INSERT INTO professional_calendar (professional_id , start_time,  end_time, specialty1, duration, time_between, monday, tuesday, wednesday, thursday, friday, saturday , sunday, date_start, date_end,   center_id,  status , deleted_professional, color ,date ,price , active ) VALUES ( '1',  '02:00:00-4' , '23:00:00-4', '100' , '50' , '10' ,  'true' ,  'true'  ,  'true' ,  'true'  ,  'true'  , 'false'  ,  'false'  ,   '2023-08-23T04:00:00.000Z'  ,  '2023-10-22T02:59:59.997Z'  ,   253 , '1' , false , '#FF4244' ,  '2023-08-23T21:51:21.307Z' ,  '888' , true ) ;
INSERT INTO professional_calendar (professional_id , start_time,  end_time, specialty1, duration, time_between, monday, tuesday, wednesday, thursday, friday, saturday , sunday, date_start, date_end,   center_id,  status , deleted_professional, color ,date ,price , active ) VALUES ( '1',  '02:00:00-4' , '23:00:00-4', '100' , '50' , '10' ,  'true' ,  'true'  ,  'true' ,  'true'  ,  'true'  , 'false'  ,  'false'  ,   '2023-08-23T04:00:00.000Z'  ,  '2023-10-22T02:59:59.997Z'  ,   251 , '1' , false , '#FF4244' ,  '2023-08-23T21:51:21.307Z' ,  '999' , true ) ;
INSERT INTO professional_calendar (professional_id , start_time,  end_time, specialty1, duration, time_between, monday, tuesday, wednesday, thursday, friday, saturday , sunday, date_start, date_end,   center_id,  status , deleted_professional, color ,date ,price , active ) VALUES ( '1',  '02:00:00-4' , '23:00:00-4', '100' , '50' , '10' ,  'true' ,  'true'  ,  'true' ,  'true'  ,  'true'  , 'false'  ,  'false'  ,   '2023-08-23T04:00:00.000Z'  ,  '2023-10-22T02:59:59.997Z'  ,   252 , '1' , false , '#FF4244' ,  '2023-08-23T21:51:21.307Z' ,  '111' , true ) ;
INSERT INTO professional_calendar (professional_id , start_time,  end_time, specialty1, duration, time_between, monday, tuesday, wednesday, thursday, friday, saturday , sunday, date_start, date_end,   center_id,  status , deleted_professional, color ,date ,price , active ) VALUES ( '1',  '02:00:00-4' , '23:00:00-4', '100' , '50' , '10' ,  'true' ,  'true'  ,  'true' ,  'true'  ,  'true'  , 'false'  ,  'false'  ,   '2023-08-23T04:00:00.000Z'  ,  '2023-10-22T02:59:59.997Z'  ,   253 , '1' , false , '#FF4244' ,  '2023-08-23T21:51:21.307Z' ,  '222' , true ) ;
INSERT INTO professional_calendar (professional_id , start_time,  end_time, specialty1, duration, time_between, monday, tuesday, wednesday, thursday, friday, saturday , sunday, date_start, date_end,   center_id,  status , deleted_professional, color ,date ,price , active ) VALUES ( '1',  '02:00:00-4' , '23:00:00-4', '100' , '50' , '10' ,  'true' ,  'true'  ,  'true' ,  'true'  ,  'true'  , 'false'  ,  'false'  ,   '2023-08-23T04:00:00.000Z'  ,  '2023-10-22T02:59:59.997Z'  ,   251 , '1' , false , '#FF4244' ,  '2023-08-23T21:51:21.307Z' ,  '333' , true ) ;
INSERT INTO professional_calendar (professional_id , start_time,  end_time, specialty1, duration, time_between, monday, tuesday, wednesday, thursday, friday, saturday , sunday, date_start, date_end,   center_id,  status , deleted_professional, color ,date ,price , active ) VALUES ( '1',  '02:00:00-4' , '23:00:00-4', '100' , '50' , '10' ,  'true' ,  'true'  ,  'true' ,  'true'  ,  'true'  , 'false'  ,  'false'  ,   '2023-08-23T04:00:00.000Z'  ,  '2023-10-22T02:59:59.997Z'  ,   252 , '1' , false , '#FF4244' ,  '2023-08-23T21:51:21.307Z' ,  '444' , true ) ;
INSERT INTO professional_calendar (professional_id , start_time,  end_time, specialty1, duration, time_between, monday, tuesday, wednesday, thursday, friday, saturday , sunday, date_start, date_end,   center_id,  status , deleted_professional, color ,date ,price , active ) VALUES ( '1',  '02:00:00-4' , '23:00:00-4', '100' , '50' , '10' ,  'true' ,  'true'  ,  'true' ,  'true'  ,  'true'  , 'false'  ,  'false'  ,   '2023-08-23T04:00:00.000Z'  ,  '2023-10-22T02:59:59.997Z'  ,   253 , '1' , false , '#FF4244' ,  '2023-08-23T21:51:21.307Z' ,  '555' , true ) ;
*/

DO $$

DECLARE v_profname text;
DECLARE v_profid bigint;
DECLARE v_centerid1 bigint;
DECLARE v_centerid2 bigint;
DECLARE v_calendarid1 bigint;
DECLARE v_calendarid2 bigint;



BEGIN 

TRUNCATE TABLE professional_calendar;
TRUNCATE TABLE center;
TRUNCATE TABLE account;
TRUNCATE TABLE professional_specialty ;
TRUNCATE TABLE professional CASCADE;
TRUNCATE TABLE appointment  CASCADE;

-- CREATE PROFESSIONALS BASED IN COUNTER
	for cnt in 1..2 loop

		v_profname := CONCAT('prof',cnt);
		-- INSERT PROFESSIONAL DATA
		INSERT INTO professional (name, document_number, license_number,  email, address, phone , active) VALUES (v_profname, CONCAT(CONCAT( CONCAT(CONCAT(cnt,cnt)),'-'), cnt )  ,'123', CONCAT(v_profname,'@nada.com'), 'avsiempreviva', '77777', true   ) 
		RETURNING id INTO v_profid;
		-- INSERT AN ACCOUNT
		INSERT INTO account  (user_id, pass , active ) VALUES ( v_profid , cnt , true ) ;
		
		--INSERT TWO SPECIALTIES to this professional
		INSERT INTO professional_specialty ( professional_id , specialty_id ) VALUES ( v_profid , '100' ) ;
		INSERT INTO professional_specialty ( professional_id , specialty_id ) VALUES ( v_profid , '200' ) ;
		
		-- INSERT CENTERs
		INSERT INTO center ( name , address , phone1,phone2, active, country, comuna, center_deleted, center_color, home_comuna1, home_comuna2 , home_visit,center_visit, remote_care, professional_id , date  ) 
	                values ( CONCAT('consulta1',v_profname) , CONCAT('Avenida consulta1 ', v_profname) ,  '7454333' , '56975397201', 1 , 1 , 1511 , false , '#FFE6EE' , 1708 , 1662,  false  , true , false ,  v_profid ,  NOW() )  
					RETURNING id INTO v_centerid1;
					
		INSERT INTO center ( name , address , phone1,phone2, active, country, comuna, center_deleted, center_color, home_comuna1, home_comuna2 , home_visit,center_visit, remote_care, professional_id , date  ) 
	                values ( CONCAT('consulta2',v_profname) , CONCAT('Avenida consulta2 ', v_profname) ,  '7454333' , '56975397201', 1 , 1 , 1512 , false , '#FF4244' , 1709 , 1662,  false  , true , false ,  v_profid ,  NOW() )  
					RETURNING id INTO v_centerid2; 
					
						
		-- INSERT CALENDARs
		--calendarColorArray : ["#FF4244","#4ebeef","#AF8536", "#f6a700", "#32b780", "#dd6da4"],
		INSERT INTO professional_calendar (professional_id , start_time,  end_time, specialty1, duration, time_between, monday, tuesday, wednesday, thursday, friday, saturday , sunday, date_start, date_end,   center_id,  status , deleted_professional, color ,date ,price , active ) 
		VALUES ( v_profid,  '09:00:00-4' , '10:00:00-4', '100' , '50' , '10' ,  'true' ,  'true'  ,  'true' ,  'true'  ,  'true'  , 'true'  ,  'false'  ,   '2023-08-23T04:00:00.000Z'  ,  '2023-09-01T02:59:59.997Z', v_centerid1 , '1' , false , '#FF4244' ,  NOW() , 666 , true ) 
		RETURNING id INTO v_calendarid1 ; 
		

		INSERT INTO professional_calendar (professional_id , start_time,  end_time, specialty1, duration, time_between, monday, tuesday, wednesday, thursday, friday, saturday , sunday, date_start, date_end,   center_id,  status , deleted_professional, color ,date ,price , active ) 
		VALUES ( v_profid,  '15:00:00-4' , '16:00:00-4', '100' , '45' , '15' ,  'true' ,  'true'  ,  'true' ,  'true'  ,  'true'  , 'false'  ,  'false'  ,   '2023-08-23T04:00:00.000Z'  ,  '2023-09-01T02:59:59.997Z', v_centerid2 , '1' , false , '#f6a700' ,  NOW() , 777 , true ) 
		RETURNING id INTO v_calendarid2 ; 
	    -- INSERT INTO professional_calendar (professional_id , start_time,  end_time, specialty1, duration, time_between, monday, tuesday, wednesday, thursday, friday, saturday , sunday, date_start, date_end,   center_id,  status , deleted_professional, color ,date ,price , active ) VALUES ( '1',  '02:00:00-4' , '23:00:00-4', '100' , '50' , '10' ,  'true' ,  'true'  ,  'true' ,  'true'  ,  'true'  , 'false'  ,  'false'  ,   '2023-08-23T04:00:00.000Z'  ,  '2023-10-22T02:59:59.997Z'  ,   251 , '1' , false , '#FF4244' ,  '2023-08-23T21:51:21.307Z' ,  '666' , true ) ;
		
		-- INSERT APPOINTMENTS
		INSERT INTO appointment (  date , start_time,  duration,  center_id, confirmation_status, professional_id, patient_doc_id, patient_name,    patient_email, patient_phone1,  patient_age,  app_available, app_status, app_blocked, app_public,  location1, location2, location3, location4, location5, location6,   app_type_home, app_type_center,  app_type_remote, patient_notification_email_reserved , specialty_reserved , patient_address , calendar_id , app_price)   
		VALUES ( '2023-09-15T11:00:00.000Z' , '2023-09-15T11:00:00.000Z' , '10' ,  v_centerid1 , '0' , v_profid , '13909371--2' ,  CONCAT('MATILDE AURORA MIRANDA',v_profname)  , 'ALEJANDRO2141@NADA.COM' , '555566534' ,  '43' ,'false' , '1' , '0' , '1', 1708 , 1662 ,null ,null ,null ,null , 'false' , 'true' , 'false' , '1' , '100' , 'null'  , v_calendarid1 , '666' 	) ; 

		INSERT INTO appointment (  date , start_time,  duration,  center_id, confirmation_status, professional_id, patient_doc_id, patient_name,    patient_email, patient_phone1,  patient_age,  app_available, app_status, app_blocked, app_public,  location1, location2, location3, location4, location5, location6,   app_type_home, app_type_center,  app_type_remote, patient_notification_email_reserved , specialty_reserved , patient_address , calendar_id , app_price)   
		VALUES ('2023-09-15T14:00:00.000Z' , '2023-09-15T14:00:00.000Z' , '10' ,  v_centerid2 , '0' , v_profid , '13909371--2' ,  CONCAT('MATILDE AURORA MIRANDA',v_profname)  , 'ALEJANDRO2141@NADA.COM' , '555566534' ,  '43' ,'false' , '1' , '0' , '1', 1708 , 1662 ,null ,null ,null ,null , 'false' , 'true' , 'false' , '1' , '100' , 'null'  , v_calendarid2 , '666' 	) ; 

		INSERT INTO appointment (  date , start_time,  duration,  center_id, confirmation_status, professional_id, patient_doc_id, patient_name,    patient_email, patient_phone1,  patient_age,  app_available, app_status, app_blocked, app_public,  location1, location2, location3, location4, location5, location6,   app_type_home, app_type_center,  app_type_remote, patient_notification_email_reserved , specialty_reserved , patient_address , calendar_id , app_price)   
		VALUES ( NOW() , NOW() , '10' ,  v_centerid1 , '0' , v_profid , '13909371--2' ,  CONCAT('MATILDE AURORA MIRANDA',v_profname)  , 'ALEJANDRO2141@NADA.COM' , '555566534' ,  '43' ,'false' , '1' , '0' , '1', 1708 , 1662 ,null ,null ,null ,null , 'false' , 'true' , 'false' , '1' , '100' , 'null'  , v_calendarid1 , '666' 	) ; 

		INSERT INTO appointment (  date , start_time,  duration,  center_id, confirmation_status, professional_id, patient_doc_id, patient_name,    patient_email, patient_phone1,  patient_age,  app_available, app_status, app_blocked, app_public,  location1, location2, location3, location4, location5, location6,   app_type_home, app_type_center,  app_type_remote, patient_notification_email_reserved , specialty_reserved , patient_address , calendar_id , app_price)   
		VALUES (NOW() , NOW(), '10' ,  v_centerid2 , '0' , v_profid , '13909371--2' ,  CONCAT('MATILDE AURORA MIRANDA',v_profname)  , 'ALEJANDRO2141@NADA.COM' , '555566534' ,  '43' ,'false' , '1' , '0' , '1', 1708 , 1662 ,null ,null ,null ,null , 'false' , 'true' , 'false' , '1' , '100' , 'null'  , v_calendarid2 , '666' 	) ; 



 	end loop;


end ; $$


					